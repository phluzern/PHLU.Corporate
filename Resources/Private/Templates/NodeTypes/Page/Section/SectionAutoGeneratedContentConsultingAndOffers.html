{namespace neos=Neos\Neos\ViewHelpers}
{namespace ts=Neos\Fusion\ViewHelpers}
{namespace phlu=Phlu\Neos\NodeTypes\ViewHelpers}
{namespace p=Phlu\Corporate\ViewHelpers\ConsultingAndOffers}

<div {attributes -> f:format.raw()}>
    <f:if condition="{sectionCount}>1">
        <f:then>
            <f:if condition="{neos:rendering.inBackend()}">
                <f:then>{neos:contentElement.editable(property: 'title', tag: 'h2')}</f:then>
                <f:else>
                    <h2><f:format.raw><f:translate locale="de" package="Phlu.Corporate" source="hyphens">{title}</f:translate></f:format.raw></h2>
                </f:else>
            </f:if>
        </f:then>
    </f:if>

    <div class="row subjectsfilternav">
        <div class="col-xs-12">
            <div class="row phlu-teaser navigation subpage">


                <f:for each="{p:getGroupedOus(nodes:nodes, pageIdentifier: pageIdentifier)}" as="group">
                    <div class="col-xs-12 nav-teaser-item ">
                        <h3>{group.name}</h3>

                        <f:for each="{group.items}" as="item">
                            <f:for each="{item.properties.ou}" as="ouId">
                                <f:if condition="{ouId} == {pageIdentifier}">
                                    <f:then>
                                        <div class="col-xs-12 nav-teaser-item {f:if(condition: '{neos:rendering.inBackend()}', then: '', else: 'clickable')}  ">
                                        <div class="row">
                                            <div class="phlu-teaser-body col-xs-12">
                                                <h3>
                                                    <neos:link.node node="{item}">
                                                        {item.properties.title}
                                                    </neos:link.node>
                                                </h3>
                                            </div>
                                        </div>
                                        </div>
                                    </f:then>
                                </f:if>
                            </f:for>
                        </f:for>
                    </div>
                </f:for>


            </div>
        </div>
    </div>
    <hr>
</div>